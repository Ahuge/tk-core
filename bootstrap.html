



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploy and management &mdash; tk-core v0.18.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="tk-core v0.18.2 documentation" href="index.html"/>
        <link rel="next" title="Foundation" href="core.html"/>
        <link rel="prev" title="Shotgun pipeline Toolkit Core reference, v0.18.2" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
    <a href='http://developer.shotgunsoftware.com'>
    
        <img style='width: 191px;
                height: 60px; 
                margin: 2px;
                border-radius: 0px; 
                padding: 0px;' 
            src='_static/logo@2x.png'/>
    
    </a>
    

          
            <a href="index.html" class="icon icon-home"> tk-core
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deploy and management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#traditional-project-setup">Traditional project setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bootstrapping-toolkit">Bootstrapping Toolkit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#toolkitmanager">ToolkitManager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exception-classes">Exception Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.html">Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform.html">Apps, Engines and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="descriptor.html">Descriptor API</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
</ul>

            
          
       
    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px; 
                color: #b3b3b3; 
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>    
    <style>
        a.custom_post_menu { display: inline; 
                             padding: 0px; 
                             text-decoration: underline; }
    </style>

    <b>tk-core</b> v0.18.2.<br>
    
        This documentation is part of the Shotgun Pipeline Toolkit.
    
    For more information, please visit
    <a class=custom_post_menu href='https://support.shotgunsoftware.com/home'>Shotgun Support</a>.
    The code associated with this documentation can be found 
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/tk-core'>here</a>.

    </div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">tk-core</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Deploy and management</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploy-and-management">
<h1>Deploy and management<a class="headerlink" href="#deploy-and-management" title="Permalink to this headline">¶</a></h1>
<p>This section outlines the various ways to set up, configure and initialize a Toolkit Setup.
There are two fundamental approaches to running Toolkit: A traditional project based setup
and a <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager" title="sgtk.bootstrap.ToolkitManager"><code class="xref py py-class docutils literal"><span class="pre">ToolkitManager</span></code></a> API that allows for more flexible manipulation of
configurations and installations.</p>
<div class="section" id="traditional-project-setup">
<h2>Traditional project setup<a class="headerlink" href="#traditional-project-setup" title="Permalink to this headline">¶</a></h2>
<p>The traditional Toolkit &#8216;pipeline approach&#8217; means that you pick an existing Shotgun
project and run a Toolkit project setup for this project. This is typically done in
Shotgun Desktop or via the <code class="docutils literal"><span class="pre">tank</span> <span class="pre">setup_project</span></code> command. A Toolkit configuration
is installed in a shared location on disk and a pipeline configuration in Shotgun is
created to create an association between the installation on disk and the project in
Shotgun.</p>
<p>Once the installation has completed, you can access functionality via the <code class="docutils literal"><span class="pre">tank</span></code> command
for that project or run <a class="reference internal" href="core.html#sgtk.sgtk_from_entity" title="sgtk.sgtk_from_entity"><code class="xref py py-meth docutils literal"><span class="pre">sgtk.sgtk_from_entity()</span></code></a> or <a class="reference internal" href="core.html#sgtk.sgtk_from_path" title="sgtk.sgtk_from_path"><code class="xref py py-meth docutils literal"><span class="pre">sgtk.sgtk_from_path()</span></code></a>
in order to create an API session.</p>
</div>
<div class="section" id="bootstrapping-toolkit">
<h2>Bootstrapping Toolkit<a class="headerlink" href="#bootstrapping-toolkit" title="Permalink to this headline">¶</a></h2>
<p>An alternative to the traditional project based setup was introduced in Core v0.18 - the
<a class="reference internal" href="#sgtk.bootstrap.ToolkitManager" title="sgtk.bootstrap.ToolkitManager"><code class="xref py py-class docutils literal"><span class="pre">ToolkitManager</span></code></a> class allows for more flexible manipulation of toolkit setups
and removes the traditional step of a project setup. Instead, you can launch an engine
straight directly based on a Toolkit configuration. The manager encapsulates the deploy
and configuration management process and makes it easy to create a running instance of
Toolkit. It allows for several advanced use cases:</p>
<ul class="simple">
<li>Bootstrapping via the Toolkit manager does not require anything to be
set up or configured in Shotgun. No extensive project setup step is required.</li>
<li>A setup can be pre-bundled with for example an application plugin, allowing
Toolkit to act as a distribution platform.</li>
<li>The Toolkit manager makes it easy to track remote resources (via the <code class="docutils literal"><span class="pre">sgtk.descriptor</span></code>
framework).</li>
</ul>
<p>The following example code can for example run inside maya in order
to launch Toolkit&#8217;s default config for a given Shotgun Asset:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sgtk</span>

<span class="c1"># Start up a Toolkit Manager</span>
<span class="n">mgr</span> <span class="o">=</span> <span class="n">sgtk</span><span class="o">.</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">ToolkitManager</span><span class="p">()</span>

<span class="c1"># Set the base configuration to the default config</span>
<span class="c1"># note that the version token is not specified</span>
<span class="c1"># The bootstrap will always try to use the latest version</span>
<span class="n">mgr</span><span class="o">.</span><span class="n">base_configuration</span> <span class="o">=</span> <span class="s2">&quot;sgtk:descriptor:app_store?name=tk-config-default&quot;</span>

<span class="c1"># now start up the maya engine for a given Shotgun object</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">mgr</span><span class="o">.</span><span class="n">bootstrap_engine</span><span class="p">(</span><span class="s2">&quot;tk-maya&quot;</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Asset&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">})</span>
</pre></div>
</div>
<p>Note that the example is primitive and for example purposes only as it will take time to execute
and blocks execution during this period.</p>
<p>In this example, there is no need to construct any <a class="reference internal" href="core.html#sgtk.Sgtk" title="sgtk.Sgtk"><code class="xref py py-class docutils literal"><span class="pre">sgtk.Sgtk</span></code></a> instance or run a <code class="docutils literal"><span class="pre">tank</span></code>
command - the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager" title="sgtk.bootstrap.ToolkitManager"><code class="xref py py-class docutils literal"><span class="pre">ToolkitManager</span></code></a> instead becomes the entry point into the system. It will
handle the setup and initialization of the configuration behind the scenes
and start up a Toolkit session once all the required pieces have been initialized and set up.</p>
<div class="section" id="toolkitmanager">
<h3>ToolkitManager<a class="headerlink" href="#toolkitmanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sgtk.bootstrap.ToolkitManager">
<em class="property">class </em><code class="descclassname">sgtk.bootstrap.</code><code class="descname">ToolkitManager</code><span class="sig-paren">(</span><em>sg_user=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager" title="Permalink to this definition">¶</a></dt>
<dd><p>This class allows for flexible and non-obtrusive management of toolkit configurations
and installations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sg_user</strong> (<a class="reference internal" href="authentication.html#sgtk.authentication.ShotgunUser" title="sgtk.authentication.ShotgunUser"><code class="xref py py-class docutils literal"><span class="pre">ShotgunUser</span></code></a>) &#8211; Authenticated Shotgun User object. If you pass in None,
the manager will provide a standard authentication for you
via the shotgun authentication module and prompting the user
if necessary. If you have special requirements around
authentication, simply construct an explicit user object
and pass it in.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.pipeline_configuration">
<code class="descname">pipeline_configuration</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.pipeline_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>The pipeline configuration that is being operated on.
By default, the primary pipeline config will be used.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup">
<code class="descname">do_shotgun_config_lookup</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to indicate if the bootstrap process should connect to
Shotgun and attempt to resolve a config. Defaults to True.</p>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, the bootstrap process will connect to Shotgun as part
of the startup, look for a pipeline configuration and attempt
to resolve a toolkit environment to bootstrap into via the
Pipeline configuration data. Failing this, it will fall back on
the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a>.</p>
<p>If <code class="docutils literal"><span class="pre">False</span></code>, no Shotgun lookup will happen. Instead, whatever config
is defined via <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a> will always be used.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.entry_point">
<code class="descname">entry_point</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.entry_point" title="Permalink to this definition">¶</a></dt>
<dd><p>The entry point defines the scope of the bootstrap operation.</p>
<p>If you are bootstrapping into an entire Toolkit pipeline, e.g
a traditional Toolkit setup, this should be left blank.</p>
<p>If you are writing a plugin that is intended to run side by
side with other plugins in your target environment, the entry
point will be used to define a scope and sandbox in which your
plugin will execute.</p>
<p>In the future, it will be possible to use the entry point value
to customize the behavior of a
plugin via Shotgun. At bootstrap, toolkit will look for a pipeline
configuration with a matching name and entry point. If found, this
will be used instead of the one defined by the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a>
property.</p>
<p>It is possible for multiple plugins running in different DCCs
to share the same entry point - in this case, they would all
get their settings and setup from a shared configuration. If you
were to override the base configuration in Shotgun, your override
would affect the entire suite of plugins. This kind of setup allows
for the development of several plugins in different DCCs that together
form a curated workflow.</p>
<p>We recommend an entry point naming convention of <code class="docutils literal"><span class="pre">provider_service</span></code>,
for example:</p>
<ul class="simple">
<li>A plugin maintained by the RV group which handles review inside RV would
be named <code class="docutils literal"><span class="pre">rv_review</span></code>.</li>
<li>A plugin for a toolkit load/publish workflow that runs inside of Maya and
Nuke, maintained by the Toolkit team, could be named <code class="docutils literal"><span class="pre">sgtk_publish</span></code>.</li>
<li>A plugin containg a studio VR workflow across multiple DCCs could be
named <code class="docutils literal"><span class="pre">studioname_vrtools</span></code>.</li>
</ul>
<p>Please make sure that your entry point is <strong>unique, explicit and short</strong>.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to force the <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="sgtk.bootstrap.ToolkitManager.base_configuration"><code class="xref py py-meth docutils literal"><span class="pre">base_configuration()</span></code></a> to always
be used, set <a class="reference internal" href="#sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup" title="sgtk.bootstrap.ToolkitManager.do_shotgun_config_lookup"><code class="xref py py-meth docutils literal"><span class="pre">do_shotgun_config_lookup()</span></code></a> to False.</p>
</div>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.base_configuration">
<code class="descname">base_configuration</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.base_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>The descriptor (string or dict) for the
configuration that should be used as a base fallback
to be used whenever runtime and shotgun configuration
resolution doesn&#8217;t resolve an override configuration to use.</p>
</dd></dl>

<dl class="attribute">
<dt id="sgtk.bootstrap.ToolkitManager.bundle_cache_fallback_paths">
<code class="descname">bundle_cache_fallback_paths</code><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.bundle_cache_fallback_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies a list of fallback paths where toolkit will go
look for cached bundles in case a bundle isn&#8217;t found in
the primary app cache.</p>
<p>This is useful if you want to distribute a pre-baked
package, containing all the app version that a user needs.
This avoids downloading anything from the app store or other
sources.</p>
<p>Any missing bundles will be downloaded and cached into
the <em>primary</em> bundle cache.</p>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.set_progress_callback">
<code class="descname">set_progress_callback</code><span class="sig-paren">(</span><em>callback</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.set_progress_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.set_progress_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a method to call whenever progress should be reported back.</p>
<p>The method needs to have the following signature:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">progress_callback</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">current_index</span><span class="p">,</span> <span class="n">max_index</span><span class="p">)</span>
</pre></div>
</div>
<p>The two index parameters are used to illustrate progress
over time and looping. <code class="docutils literal"><span class="pre">max_index</span></code> is the total number of
current progress items, <code class="docutils literal"><span class="pre">current_index</span></code> is the currently
processed item. This can be used to compute a percentage.
Note that <code class="docutils literal"><span class="pre">max_index</span></code> may change at any time and is not guaranteed
to be fixed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>callback</strong> &#8211; Callback fn. See above for details.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sgtk.bootstrap.ToolkitManager.bootstrap_engine">
<code class="descname">bootstrap_engine</code><span class="sig-paren">(</span><em>engine_name</em>, <em>entity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tank/bootstrap/manager.html#ToolkitManager.bootstrap_engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.ToolkitManager.bootstrap_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an sgtk instance for the given project or site,
then launch into the given engine.</p>
<p>If entity is None, the method will bootstrap into the site
config. This method will attempt to resolve the config according
to business logic set in the associated resolver class and based
on this launch a configuration. This may involve downloading new
apps from the toolkit app store and installing files on disk.</p>
<p>Please note that the API version of the tk instance that hosts
the engine may not be the same as the API version that was
executed during the bootstrap.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>entity</strong> (<em>Dictionary with keys type and id</em>) &#8211; Shotgun entity to launch engine for</li>
<li><strong>engine_name</strong> &#8211; name of engine to launch (e.g. <code class="docutils literal"><span class="pre">tk-nuke</span></code>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="platform.html#sgtk.platform.Engine" title="sgtk.platform.Engine"><code class="xref py py-class docutils literal"><span class="pre">sgtk.platform.Engine</span></code></a> instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exception-classes">
<h3>Exception Classes<a class="headerlink" href="#exception-classes" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="sgtk.bootstrap.TankBootstrapError">
<em class="property">class </em><code class="descclassname">sgtk.bootstrap.</code><code class="descname">TankBootstrapError</code><a class="reference internal" href="_modules/tank/bootstrap/errors.html#TankBootstrapError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sgtk.bootstrap.TankBootstrapError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all bootstrap related errors</p>
</dd></dl>

</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="core.html" class="btn btn-neutral float-right" title="Foundation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Shotgun pipeline Toolkit Core reference, v0.18.2" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Autodesk.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v0.18.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2114792-1', 'auto');
  ga('send', 'pageview');
</script>



</body>
</html>